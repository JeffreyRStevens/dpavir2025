{
  "hash": "b96a3f1d9cedd571edba2a9186e9c3a8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Dates and times\"\nauthor: \"Jeffrey R. Stevens\"\ndate: \"2023-03-22\"\noutput: html_document\nexecute:\n  freeze: true\n---\n\n\n\nFor these exercises, we'll use the dates data set. \n\n\n\n\n\n\n\n\n1. Load tidyverse, import [`dates.csv`](https://jeffreyrstevens.quarto.pub/dpavir/data/dates.csv) to `dates`, and view the data set.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\ndates <- read_csv(here::here(\"data/dates.csv\"), show_col_types = FALSE)\n```\n:::\n\n\n\n\n2. Convert `birth_date` to a date object and resave `dates`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndates <- dates |> \n  mutate(birth_date = mdy(birth_date))\n```\n:::\n\n\n\n\n3. Create a column called _time1_ that converts _test1_ to datetime and change the time zone to \"America/Chicago\".\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndates |> \n  mutate(time1 = as_datetime(test1, tz = \"America/Chicago\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 20 × 5\n      id birth_date test1      test2      time1              \n   <dbl> <date>     <date>     <date>     <dttm>             \n 1     1 1955-05-04 2022-01-21 2022-09-12 2022-01-21 00:00:00\n 2     2 2001-01-26 2022-01-05 2022-06-07 2022-01-05 00:00:00\n 3     3 1973-01-13 2022-02-02 2022-06-26 2022-02-02 00:00:00\n 4     4 1951-03-26 2022-02-09 2022-08-08 2022-02-09 00:00:00\n 5     5 1986-10-25 2022-01-14 2022-06-05 2022-01-14 00:00:00\n 6     6 2003-04-10 2022-03-04 2022-08-14 2022-03-04 00:00:00\n 7     7 1971-01-21 2022-02-13 2022-08-09 2022-02-13 00:00:00\n 8     8 1966-04-14 2022-03-17 2022-08-27 2022-03-17 00:00:00\n 9     9 1993-07-05 2022-02-13 2022-06-29 2022-02-13 00:00:00\n10    10 1966-04-25 2022-03-04 2022-07-12 2022-03-04 00:00:00\n11    11 1992-04-22 2022-02-25 2022-09-02 2022-02-25 00:00:00\n12    12 1957-03-01 2022-01-12 2022-09-20 2022-01-12 00:00:00\n13    13 1984-03-01 2022-01-14 2022-07-23 2022-01-14 00:00:00\n14    14 1957-11-28 2022-03-30 2022-06-18 2022-03-30 00:00:00\n15    15 1993-08-01 2022-02-06 2022-07-24 2022-02-06 00:00:00\n16    16 1979-09-03 2022-01-26 2022-09-03 2022-01-26 00:00:00\n17    17 1993-04-30 2022-01-24 2022-07-06 2022-01-24 00:00:00\n18    18 1962-07-03 2022-01-25 2022-06-10 2022-01-25 00:00:00\n19    19 1997-05-10 2022-02-21 2022-07-22 2022-02-21 00:00:00\n20    20 1966-10-19 2022-02-10 2022-07-09 2022-02-10 00:00:00\n```\n\n\n:::\n:::\n\n\n\n\n4. Calculate each participant's age in years at the time of test 1, rounded to 1 decimal place, stored in _age_ and resave `dates`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndates <- dates |> \n  mutate(age = round(as.numeric(test1 - birth_date) / 365.25, 1))\n```\n:::\n\n\n\n\n5. Calculate the number of days between test 1 and test 2 for each participant and label this column _test_diff_ (and resave `dates`).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndates <- dates |> \n  mutate(test_diff = test2 - test1)\n```\n:::\n\n\n\n\n6. Create `dates2` that subsets the participants who were born after January 1, 1970.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndates2 <- dates |> \n  filter(birth_date > \"1970-01-01\")\n```\n:::\n\n\n\n\n7. Create a column named _diff_text_ that writes the following sentence for each participant in `dates2`: \"Participant [insert _id_] (age: [insert _age_]) had test 1 on [insert _test1_] and test 2 on [insert _test2_], which were [insert _test_diff_] days apart.\"\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndates2 |> \n  mutate(diff_text = stringr::str_glue(\"Participant {id} (age: {age}) had test 1 on {test1} and test 2 on {test2}, which were {test_diff} days apart.\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 12 × 7\n      id birth_date test1      test2        age test_diff diff_text             \n   <dbl> <date>     <date>     <date>     <dbl> <drtn>    <glue>                \n 1     2 2001-01-26 2022-01-05 2022-06-07  20.9 153 days  Participant 2 (age: 2…\n 2     3 1973-01-13 2022-02-02 2022-06-26  49.1 144 days  Participant 3 (age: 4…\n 3     5 1986-10-25 2022-01-14 2022-06-05  35.2 142 days  Participant 5 (age: 3…\n 4     6 2003-04-10 2022-03-04 2022-08-14  18.9 163 days  Participant 6 (age: 1…\n 5     7 1971-01-21 2022-02-13 2022-08-09  51.1 177 days  Participant 7 (age: 5…\n 6     9 1993-07-05 2022-02-13 2022-06-29  28.6 136 days  Participant 9 (age: 2…\n 7    11 1992-04-22 2022-02-25 2022-09-02  29.8 189 days  Participant 11 (age: …\n 8    13 1984-03-01 2022-01-14 2022-07-23  37.9 190 days  Participant 13 (age: …\n 9    15 1993-08-01 2022-02-06 2022-07-24  28.5 168 days  Participant 15 (age: …\n10    16 1979-09-03 2022-01-26 2022-09-03  42.4 220 days  Participant 16 (age: …\n11    17 1993-04-30 2022-01-24 2022-07-06  28.7 163 days  Participant 17 (age: …\n12    19 1997-05-10 2022-02-21 2022-07-22  24.8 151 days  Participant 19 (age: …\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}